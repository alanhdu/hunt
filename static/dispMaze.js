// Generated by CoffeeScript 1.7.1
(function() {
  var getType, render;

  render = function(arena) {
    var c, chr, height, map, width, x, y, _i, _len;
    arena += '\n';
    width = arena.indexOf('\n');
    height = (arena.length + 1) / (width + 1);
    console.log(arena);
    x = 0;
    y = 0;
    map = "";
    for (_i = 0, _len = arena.length; _i < _len; _i++) {
      chr = arena[_i];
      switch (chr) {
        case '*':
          c = getType(x, y, width, arena);
          map += "<span id=\"" + x + "-" + y + "\">" + c + "</span>";
          x++;
          break;
        case ' ':
          map += "<span id=\"" + x + "-" + y + "\">&nbsp;</span>";
          x++;
          break;
        case '\n':
          map += "<br />";
          x = 0;
          y++;
      }
    }
    return (document.getElementById("map")).innerHTML = map;
  };

  getType = function(x, y, width, arena) {
    var bot, dash, left, pipe, pos, right, top, w;
    w = width + 1;
    pos = w * y + x;
    top = pos - w;
    bot = pos + w;
    left = pos - 1;
    right = pos + 1;
    if (arena[left] === '*' || arena[right] === '*') {
      dash = true;
    }
    if (arena[top] === '*' || arena[bot] === '*') {
      pipe = true;
    }
    if (pipe && dash) {
      return '+';
    } else if (pipe) {
      return '|';
    } else if (dash) {
      return '-';
    } else {
      return ' ';
    }
  };

}).call(this);
